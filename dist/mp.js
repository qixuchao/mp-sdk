!function(){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(n,t){var e,i=Object.keys(n);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(n),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),i.push.apply(i,e)),i}function u(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(Object(e),!0).forEach(function(t){r(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,n){return(s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t,n){if(null==t)return{};var e,i=function(t,n){if(null==t)return{};for(var e,i={},o=Object.keys(t),r=0;r<o.length;r++)e=o[r],0<=n.indexOf(e)||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),r=0;r<o.length;r++)e=o[r],0<=n.indexOf(e)||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e]);return i}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t(r){var c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n,e,i,o=a(r);return n=c?(t=a(this).constructor,Reflect.construct(o,arguments,t)):o.apply(this,arguments),e=this,!(i=n)||"object"!=typeof i&&"function"!=typeof i?d(e):i}}function f(t){return void 0===t}function h(t){return"function"==typeof t}var p=Object.prototype.toString;function v(t){if("[object Object]"!==(null==(n=t)?void 0===n?"[object Undefined]":"[object Null]":p.call(n)))return!1;var n;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var y=function(t,n){if(t)if(Array.isArray(t))t.forEach(n);else for(var e in v,t)n&&n(t[e],e)},n=function(){function t(){o(this,t),this._events={}}return e(t,[{key:"on",value:function(t,n){return(this._events[t]=this._events[t]||[]).push(n),this}},{key:"off",value:function(){}},{key:"once",value:function(t){this.on(t,function(){})}},{key:"trigger",value:function(t,n){var e=this;y(this._events[t],function(t){h(t)&&t.call(e,n)})}}]),t}();function g(t){var n;""!==t&&((n=document.createElement("img")).onload=function(){n=n.onload=null},n.src=t)}function b(t,n){var e=0<arguments.length&&void 0!==t?t:"div",i=1<arguments.length?n:void 0,o=document.createElement(e);return o.id=i,o.style.display="none",o.className=i,document.body.appendChild(o),o}var m=function(t){"string"==typeof t&&(t=[t]),y(t,g)};var O={bid:"bidTracking",error:"errorTracking",imp:"impTracking",bidSuc:"bidSucTracking",click:"clickTracking",winner:"bidSelectedTracking"},w=0;function j(t){for(var n=arguments.length,e=new Array(1<n?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return h(t)&&t.apply(this,e)}var k=function(){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}(a,n);var i=t(a);function a(t,n){var e;return o(this,a),r(d(e=i.call(this)),"onLoaded",function(t){e.log("bidSuc",t),e.adInfo=t,e.trigger("loaded")}),r(d(e),"onTimeOut",function(){e.log("error"),e.destroy()}),r(d(e),"destroy",function(){e.status="10",e.$container.parentNode&&e.$container.parentNode.removeChild(e.$container)}),e.name=t,e.options=n,e.sandbox=!1!==e.options.sandbox,e}return e(a,null,[{key:"use",value:function(t){if(!f(a.VENDORS[t])&&a.VENDORS[t]instanceof a)return a.VENDORS[t].fork()}}]),e(a,[{key:"getContainer",value:function(){!1===this.sandbox?this.$container=b("div",this.id):this.$container=b("iframe",this.id)}},{key:"fork",value:function(){var t=new a(this.name,this.options);return t.index=w++,t.id="mp_wrapper_".concat(this.name,"_").concat(t.index),t.getContainer(),t}},{key:"run",value:function(t){var n=this,e=0<arguments.length&&void 0!==t?t:{};this.data=e;var i,o,r,c,u;return this.trigger("init"),n.log("bid"),j.call(n,n.options.onInit,e.consumer||{},{onTimeOut:n.onTimeOut,onLoaded:n.onLoaded}),"init"===a.vendorLoaded[this.name]&&(a.vendorLoaded[this.name]="loading",i=this.options.src,o=function(){a.vendorLoaded[n.name]="loaded"},r=function(){a.vendorLoaded[n.name]="init",n.trigger("loadError")},c=document.getElementsByTagName("script")[0],(u=document.createElement("script")).onload=function(){u=u.onload=null,o&&o()},u.onerror=function(){u=u.onerror=null,r&&r()},u.src=i,c.parentNode.insertBefore(u,c)),this}},{key:"log",value:function(t){m(this.data.trackingData[O[t]])}},{key:"render",value:function(t){var n=this;this.log("winner");var e,i,o,r,c=document.querySelector(t);c&&(this.log("imp"),j.call(this,this.options.onBeforeMount),c.appendChild(this.$container),this.$container.style.display="block",j.call(this,this.options.onMounted),this.sandbox||(e=this.$container,i=function(){n.log("click")},e.addEventListener?e.addEventListener(i,o,!!r):e.attachEvent("on"+i,o)))}}]),a}();r(k,"VENDORS",{}),r(k,"vendorLoaded",{}),r(k,"register",function(t,n){var e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];(f(k.VENDORS[t])||e)&&(k.VENDORS[t]=new k(t,n),k.vendorLoaded[t]="init")}),k.register("qq",{src:"//qzs.qq.com/qzone/biz/res/i.js",sandbox:!1,onInit:function(t,n){var e=n.onLoaded,i=n.onTimeOut;window.TencentGDT=window.TencentGDT||[];var o=setTimeout(function(){i(),clearInterval(o),o=null},1e3*t.timeOut);window.TencentGDT.push({placement_id:t.consumerSlotId,app_id:t.appid,type:"native",count:1,onComplete:function(t){clearInterval(o),Array.isArray(t)?e(t[0]):(i(),setTimeout(function(){},3e3))}})},onBeforeMount:function(){},onMounted:function(){this.adInfo&&window.TencentGDT.NATIVE.renderAd(this.adInfo,this.id)},getWeight:function(){}}),k.register("baidu",{src:"//cpro.baidustatic.com/cpro/ui/cm.js",sandbox:!1,onInit:function(t,n){var e=this,i=n.onLoaded,o=n.onTimeOut;(window.slotbydup=window.slotbydup||[]).push({id:t.consumerSlotId,container:this.id,async:!0});var r=setInterval(function(){e.$container&&e.$container.querySelector("iframe")&&(i(),clearTimeout(c),c=null,clearInterval(r),r=null)},100),c=setTimeout(function(){o(),clearInterval(r),r=null},1e3*t.timeOut)},onMounted:function(){}});var T=function(){function i(t){var n,r,c,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o(this,i),this.container=t,this.$container=document.querySelector(t),this.isConcurrent=e.isConcurrent,this.priorityPolicy=e.priorityPolicy,this.options=e,this.status="0",e.isConcurrent?this.consumers=e.slotBidding:this.consumers=(n=e.slotBidding,r=[],c=0,y(n,function(t,n){var e=t.weight,i=void 0===e?0:e,o=l(t,["weight"]);c<i?(c=i,r=[o]):i===c&&r.push(o)}),r),this.loadedConsumerNumber=0,this.distribute()}return e(i,[{key:"distribute",value:function(){var e=this;y(this.consumers,function(t){var n=k.use(t.consumer.consumerType);n&&(n.on("init",function(){}).on("loaded",function(){e.race(n)}),n.run(t))})}},{key:"race",value:function(t){"5"!==this.status&&(this.status="5",t.render(this.container))}}]),i}(),E=function(){function n(t){o(this,n),this.slots={},this.init(t)}return e(n,[{key:"init",value:function(t){this._originalList=t,(window.M$P=this).MEDIA_CONFIG={},this.parseMediaConfig(window.M$P_M_C),this.handler(this._originalList)}},{key:"parseMediaConfig",value:function(t){var n=this,e=0<arguments.length&&void 0!==t?t:{};this.MEDIA_CONFIG={},e.slotBiddings&&y(e.slotBiddings,function(t){n.MEDIA_CONFIG[t.slotId]=t})}},{key:"push",value:function(t){this.handler([t])}},{key:"handler",value:function(t){var n=this;y(t,function(t){h(t)?t.call(n,{union:{register:k.register,use:k.use},utils:{}}):v(t)&&(f(t.id)?f(t.mediaid)||f(t.secret)||f(n.mediaid)&&(n.mediaid=t.mediaid,n.secret=t.secret):f(n.slots[t.id])&&n.MEDIA_CONFIG[t.id]&&n.fillAd(t.container,u(u({},n.MEDIA_CONFIG[t.id]),{},{id:t.id})))})}},{key:"fillAd",value:function(t,n){this.slots[n.id]=new T(t,n)}}]),n}();r(E,"Ver","1.0.0");var I=window.M$P;(Array.isArray(I)||f(I))&&new E(I)}();
